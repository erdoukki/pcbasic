1 ' PAINT with tile and background in SCREEN 9
5 SCREEN 9: CLS
10 LINE (10,10)-( 40, 40),4,B
20 FOR I=8 TO 15:A$=A$+CHR$(I)+CHR$(0)+CHR$(I)+CHR$(0): NEXT
30 B$=CHR$(0)+CHR$(255)+CHR$(0)+CHR$(255)
35 A$=A$+B$
40 PAINT ( 15,  15),10,4
50 PAINT ( 15,  15),A$,4, B$
110 LINE (50,10)-( 80, 40),4,B
140 PAINT ( 55,  15),10,4
150 PAINT ( 55,  15),A$,4
2000 R.X0%=5: R.X1%=85: R.Y0%=5: R.Y1%=45: R.BPP%=4: GOSUB 10000
9999 CLOSE:END
10000 'save screen region (R.X0%, R.Y0%)-(R.X1%, R.Y1%) with R.BPP% bits per pixel
10140 LINE (R.X0%, R.Y0%)-(R.X1%, R.Y1%),1,B
10145 R.SIZE% = (R.X1%-R.X0%+16\R.BPP%) * (R.Y1%-R.Y0%+1) + 2
10147 R.SIZE% = R.SIZE%*R.BPP%\16 + 100 ' we need to cheat here, calc is wrong 
10150 DIM R.SPRITE%(R.SIZE%)
10160 GET (R.X0%, R.Y0%)-(R.X1%, R.Y1%), R.SPRITE%
10165 OPEN "output.txt" FOR OUTPUT AS 1
10167 PRINT#1, R.SPRITE%(0), R.SPRITE%(1)
10170 FOR I=0 TO R.SIZE%
10190   PRINT#1, HEX$(R.SPRITE%(I)); " ";
10200   IF I MOD 16=15 THEN PRINT#1,
10220 NEXT
10275 CLOSE 1
10300 RETURN
20000 PRINT#2, ERR, ERL
20010 RESUME NEXT


